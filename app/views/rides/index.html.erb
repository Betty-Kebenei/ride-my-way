<p id="notice"><%= notice %></p>

<% if request.params[:format] %>
  <h1>Ride <%= request.params[:format] %>s</h1>
<% else %>
  <h1>My rides</h1>
<% end %>

<p>
  <%= link_to 'Add Ride Offer', new_ride_path('offer') %>
  <%= link_to 'Add Ride Request', new_ride_path('request') %>
</p>

<% @rides.each do |ride| %>
  <% if request.params[:format] %>
    <div class="columns">
      <div class="column col-5">
        <figure class="avatar avatar-xl">
          <img src="<%= ride.user.image_url %>" alt="user-image">
        </figure>
        <%= ride.user.name %>
      </div>
      <div class="column col-6">
        <%= render 'ride-details', ride: ride %>
      </div>
      <div class="column col-1">
        <% if ride.user.id != current_user.id %>
          <%= button_to 'Accept',
                        ride,
                        method: :patch,
                        class: 'btn btn-success' %>
        <% end %>
      </div>
    </div>
  <% else %>
    <div class="columns">
      <div class="column col-6">
        <%= render 'ride-details', ride: ride %>
        <br>
        <%= link_to 'Edit', edit_ride_path(ride) %>
        <%= link_to 'Cancel',
                      ride,
                      method: :delete,
                      data: {confirm: 'Are you sure you want this ride deleted?'}%>
      </div>
      <div class="column col-6">
        <span><b>Status</b></span><br>
        <% if ride.respondents.length > 0 %>
          <p>
            Response from:<br>
            <% ride.respondents.each do |respondent|  %>
              - <i><%= respondent %></i> <br>
            <% end %>
          </p>
        <% else %>
          <p><i>Pending...</i></p>
        <% end %>
      </div>
    </div>
  <% end %>
  <hr>
<% end %>
